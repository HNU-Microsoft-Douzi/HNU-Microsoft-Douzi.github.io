---
title: "Android之大恐怖——OOM"
subtitle: "The most terrified question which name is OOM in Android"
layout: post
data: 2018-08-10
author: "Zxy"
tags:
    - android
---

难以想象android开发的途径中很快就遇到了这个问题，一开始出现问题还百思不得其解，不断调试，耗费巨大的代价总算明白了问题的所在。

说下背景：在一个android项目中，在打造一个社交类的APP,然而在引导页ViewPager滑到最后一页会出现一个进入下一页的按钮，点击这个按钮，原本是要进入登录页面的。

但是...点击按钮以后，屏幕全部变白，然后根据不同的机型会弹出不同的错误条件：

OPPO-产生绿色加载条，无限循环

华为-桌面组件损坏，无限循环

虚拟机-UI界面损坏，无限循环

没错，这是我至今为止付出最大代价查明的一个错误，毁了我两台机子，又崩溃了我的虚拟机。

虚拟机的崩溃信息如下：

![](/assets/OOM_1.png)

错误信息：

![](/assets/OOM_2.png)

问题的罪魁祸首就是OOM，编译的时候根本不能查出来这个错误，一旦在程序中运行产生OOM，直接让机子崩溃，产生大恐怖！！！

8/12/2018 2:45:45 PM 

然后在这个时候，总算是查到了问题的来源，运行开始就有错误:

`Unfortunately:Launcher3 has stopped`

然后后面接着报的错误是一个Out of Memory：内存不够分配的错误。

想了两天，也没有想到有什么地方的资源没有被释放，也不知道有什么样大的文件才能让我的应用完全被阻塞住。

#### 答案如下：

是icon图标出了问题，我一开始为了绝对高清的图标，设置icon大小为3000x3000,像素大小可想而知，对图标中的函数调用BitmapFactory()的时候就开始有问题，还是看的日志分析了一遍才猜到的，最后把icon图标改为了48x48就没有了问题，网上查了很久说的很多东西和我的情况都不符合，我想也没有多少人像我一样把图标设置了那么大...

其实从第一次崩溃就应该了解到的，但是那个时候用真机调试直接把手机崩毁就没有想到那么多。

因为那是我第一次更改图标的设置...